<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Maintenance Records</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3"></script>

<script>
window.supabaseClient = supabase.createClient(
  "https://cyaxvuwkwptaxbkpwyid.supabase.co",
  "sb_publishable_wshxDs-Q_gUgYXxVjw7bwA_ycY3kndA"
);
</script>

<style>
body{font-family:Arial;background:#eef2f6;margin:0}
header{background:#0b5ed7;color:white;padding:10px;text-align:center}
.card{background:white;margin:12px;padding:15px;border-radius:12px}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #ccc;padding:6px}
</style>
</head>

<body>

<header>
<h3>Maintenance Records</h3>
</header>

<div class="card">
<h4>Train Maintenance</h4>
<table>
<thead><tr><th>#</th><th>Train</th><th>Location</th><th>Date</th></tr></thead>
<tbody id="trainBody"></tbody>
</table>
</div>

<script>
loadTrain()

async function loadTrain(){

const {data,error}=await window.supabaseClient
.from("train_maintenance")
.select("*")
.order("id",{ascending:false})

if(error){
 console.log(error)
 return
}

let html=""
data.forEach((r,i)=>{
 html+=`<tr>
 <td>${i+1}</td>
 <td>${r.train_set}</td>
 <td>${r.location}</td>
 <td>${r.date}</td>
 </tr>`
})

trainBody.innerHTML=html
}
</script>

</body>
</html>
