<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Train Maintenance</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#eef2f6;margin:0}
header{background:#0b5ed7;color:white;padding:10px;text-align:center}
.card{background:white;margin:12px;padding:15px;border-radius:12px}
input,textarea{width:100%;padding:8px;margin-top:6px}
button{width:100%;padding:12px;background:#198754;color:white;border:none}
</style>
</head>

<body>

<!-- SUPABASE INIT -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3"></script>
<script>
window.supabaseClient = supabase.createClient(
  "https://cyaxvuwkwptaxbkpwyid.supabase.co",
  "sb_publishable_wshxDs-Q_gUgYXxVjw7bwA_ycY3kndA"
);
console.log("Supabase loaded");
</script>

<header>
<h3>Train Maintenance Entry</h3>
</header>

<div class="card">

<input id="train_set" placeholder="Train Set">
<input id="location" placeholder="Location">
<input type="date" id="date">
<input type="time" id="start_time">
<input type="time" id="end_time">
<textarea id="work" placeholder="Work Description"></textarea>

<button onclick="saveTrain()">Save</button>

</div>

<script>
async function saveTrain(){

const payload={
  train_set:train_set.value,
  location:location.value,
  date:date.value,
  start_time:start_time.value,
  end_time:end_time.value,
  work:work.value
}

const {error}=await window.supabaseClient
.from("train_maintenance")
.insert([payload])

if(error){
 alert(error.message)
}else{
 alert("Saved Successfully")
 document.querySelectorAll("input,textarea").forEach(e=>e.value="")
}

}
</script>

</body>
</html>
